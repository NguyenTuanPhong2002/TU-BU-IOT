/*
 * sim7600.h
 *
 *  Created on: Mar 9, 2024
 *      Author: Trump
 */

#ifndef INC_SIM7600_H_
#define INC_SIM7600_H_

#include <stm32f4xx_hal.h>
/**
 * @brief SIM7600_HandleTypeDef structure definition
 *
 */
typedef struct {

	uint16_t powerEnPin;
	uint16_t resetPin;
	uint16_t sleepPin;
	uint16_t pwrkeyPin;
	GPIO_TypeDef *resetPort;
	GPIO_TypeDef *sleepPort;
	GPIO_TypeDef *pwrkeyPort;
	GPIO_TypeDef *powerEnPort;
	UART_HandleTypeDef *huart;
	DMA_HandleTypeDef *hdma;

} SIM7600_HandleTypeDef;

void SIM7600_wakeup(SIM7600_HandleTypeDef *const me);
void SIM7600_POWER_ON(SIM7600_HandleTypeDef *const me);
void SIM7600_POWER_OFF(SIM7600_HandleTypeDef *const me);
void SIM7600_PWRKEY_ON(SIM7600_HandleTypeDef *const me);
void SIM7600_RESET_ON(SIM7600_HandleTypeDef *const me);
void SIM7600_sleep(SIM7600_HandleTypeDef *const me);
/*
 * Mô tả: Gửi dữ liệu từ STM32 sang Module Sim bằng UART, thường là tập lệnh AT.
 * [in]: ATCommand: Lệnh AT gửi qua Module Sim, ví dụ "AT+HTTPINIT"
 * [in]: Response: Mong muốn trả về từ module Sim, có thể là "OK", hoặc "DOWNLOAD"
 * [in]: Timeout: Thời gian chờ Module Sim phản hồi lại.
 * */
SIM7600_HandleTypeDef SIM7600_sendATCommand(const char *ATCommand, const char *Response,
		uint32_t Timeout);

#endif /* INC_SIM7600_H_ */
